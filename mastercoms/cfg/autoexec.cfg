// master comfig - 1.2.0 (October 11 2016)
// doesn't set things to their default values like in other fps configs
// so don't worry if an option is missing
// launch options: -high -novid -nojoy -noff
// you can also add -nohltv if you don't use sourcetv
// if you update the config, add -autoconfig,
// launch tf2, and then remove it

// --- TESTING --- \\

// save console output to GAME_FOLDER/tf/console.log
//con_logfile console.log

// display developer output
//developer 4

// --- FILESYSTEM --- \\

// modern systems can read more files
filesystem_max_stdio_read 64

// --- NETWORKING --- \\

// for both of these commands, 66 is the default max rate, so you can't go higher
// since your fps is limited to 60, there is no point to receiving any more packets than that
// cmdrate is the maximum packets per second the client can send to the server
// so like you tell the server i moved forward or i shot my rocket launcher, crouched, and jumped
cl_cmdrate 60
// updaterate is the maximum packets per second the server can send to the client
// so like the server tells you this pyro is running towards you and
// is using his primary fire on her flame thrower
cl_updaterate 60

// interp is the delay between packets
// using interp ratio is more accurate than setting it manually,
// so set it to 0 to make this happen
cl_interp 0

// ATTENTION!!! if your connection is lower than 2 Mbps, then lower this value (it's in bytes/sec)
// default was 80,000 for 50 packets/sec, so as we are sending 132 packets/sec,
// this is in line with the default
// keep in mind this is the max rate so even if I'm wrong and this is absurdly high,
// it won't hurt
rate 211200

// --- SHADOWS --- \\

// half the maximum amount of shadows (32)
r_shadowmaxrendered 16

// render shadows once, not twice
cl_blobbyshadows 1

// threaded shadow manager
// this actually doesn't do anything
// in the latest source engine base (2013)
// so it's likely that tf2 doesn't use it either,
// but either may use it in the future,
// if valve ever opts to use this
// value again
r_threaded_client_shadow_manager 1

// disable shadow depth texture
r_flashlightdepthtexture 0

// --- RAGDOLLS --- \\

// after the ragdoll becomes stationary,
// it doesn't really need to be touched again
// we all know that the funniest ragdoll physics
// happen when they are created and matter less after that
ragdoll_sleepaftertime 1.0f

// nobody cares about ragdolls when they've been rotting on the ground
// so make them fade out faster
cl_ragdoll_fade_time 5
g_ragdoll_fadespeed 200

// let's calm down with the physics a bit.
// scale the push force down to half.
phys_pushscale 0.5

// --- GRAPHICS --- \\

// these settings will optimize graphics
// without causing any noticeable downgrades

// set to monitor refresh rate. it's not good to have wasted frames
fps_max 60

// you don't see like half the battlefield with this on 75
fov_desired 90

// the 3d player model in the hud
// you even get a message in game asking you to disable this
cl_hud_playerclass_use_playermodel 0

// without getting too in-depth,
// we're making it so we don't have to calculate
// what we can see or not every time for lighting
// but it's less accurate, so lower quality
r_lightcache_zbuffercache 1

// lines for hitscan bullets are traced and simulate motion
// honestly deceiving and also affects performance
r_drawtracers_firstperson 0
// makes tracers more visible,
// so it's some extra fluff
tracer_extra 0

// this disables flex anims when fps is lower than (1 / ai_expression_frametime)
// also does just a tiny bit more expensive check to find out if the animation is in the player's view,
// rather than just using PVS (potentially visible set)
ai_expression_optimization 1
ai_expression_frametime 0.022

// async model loading
mod_load_mesh_async 1
mod_load_anims_async 1
mod_load_vcollide_async 1

// 1 is a good balance between
// performance and stability
mat_queue_mode 1

// parallel processing of bones
r_threaded_renderables 1
// parallel processing of bone setup
cl_threaded_bone_setup 1

// better rendered and threaded particle effects
cl_new_impact_effects 1

// process leaf list in parallel
cl_threaded_client_leaf_system 1

// draw entities first, then props
r_drawopaquestaticpropslast 1

// when the thread pool is not available,
// use this many cores for particles
// change this if you don't have this many cores
particle_sim_alt_cores 4

// batch decals and thread them
r_queued_decals 1
// cull decals under this size in pixels
r_decal_cullsize 16

// optimization to fog volume leaf
fast_fogvolume 1

// uses fast z reject on hardware that supports it
r_fastzreject -1

// this was last known to only be used on the Xbox 360
// but Valve may have decided that the extra batches are worth
// doing on the PC
// it doesn't hurt setting this to on, since it will be ignored
// if it is not used
// also, this setting only works if r_fastzreject is on
// basically just does the same fast z reject, but on displacements as well
r_fastzrejectdisp 1

// make max lod distance 5000, and make min lod distance 0
// it makes objects fade at the shortest possible distance to be set
lod_TransitionDist -5000

// distance at which detail props stop being shown
cl_detaildist 800

// props will fade through this distance
// 800 means they will fade whenever they are visible, since detail dist is 800
cl_detailfade 800

// --- GRAPHICAL DOWNGRADES -- \\
// uncomment if you want to boost your fps
// with some options that downgrade the fps
// normally, this isn't required, as most of
// the time, tf2 is cpu bound, but
// on weaker gpus, higher quality graphics
// may be causing low fps

// disables phong shading to allow
// for the simpler flat shading
//mat_phong 0

// --- BETA --- \\

// some options i'm testing
// please let me know what you think.

// skips an extra step to get textures cached
mat_forcemanagedtextureintohardware 0

// --- SOUND -- \\

// disable sound processing
// this can allow for external
// processing, like HRTF
// generally, this will produce "better" sound
dsp_slow_cpu 1
snd_spatialize_roundrobin 1
dsp_enhance_stereo 0
snd_pitchquality 1

// make the sound system get along with threading
snd_async_fullyasync 1

// mix sounds on a new thread
snd_mix_async 1

// --- MISC --- \\

// upload files to the bug reporter asynchronously
bugreporter_uploadasync 1


// --- FINALIZE --- \\

// branding and to make sure the config is actually loading
echo "master comfig v1.2.0 loaded."

// some commands are run by default by tf2
// and they require sv_cheats to be on
sv_cheats 1

// run extra.cfg, so you can put binds and stuff
//exec extra
